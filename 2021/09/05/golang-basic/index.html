<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Gkfat">
    
    <title>
        
            Golang 學習筆記 - 初步接觸 Go! |
        
        Gk&#39;s blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"gkfat.github.io","root":"/","language":"zh-TW","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066cc","avatar":"/images/gkfat.png","favicon":"/images/logo.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"在成為全端工程師的路上，以微小而堅定的步伐，努力邁進。"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分鐘前","hour":"%s 小時前","day":"%s 天前","week":"%s 周前","month":"%s 個月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Gk&#39;s blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                關於
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                歸檔
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">關於</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">歸檔</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Golang 學習筆記 - 初步接觸 Go!</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/gkfat.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Gkfat</span>
                        
                            <span class="author-label">全端打雜工</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2021-09-05 08:34:03</span>
        <span class="mobile">2021-09-05 08:34</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%BE%8C%E7%AB%AF%E9%96%8B%E7%99%BC/">後端開發</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Go/">Go</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>2.3k 字數</span>
        </span>
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>為了看懂後端主管寫的專案原始碼，趁著最近專案開發中間空檔，趕快來學習一下 Golang！基於自學習慣，我會先概覽這個語言的基礎，之後再針對遇到的主題進一步研究。</p>
<span id="more"></span>

<p>本次整理出三個部分：</p>
<ul>
<li><a href="##Go%E7%9A%84%E8%B3%87%E6%96%99%E5%9E%8B%E5%88%A5">Go 的資料型別</a></li>
<li><a href="##Go%E7%9A%84%E5%A5%97%E4%BB%B6">Go 的套件</a></li>
<li><a href="##Go%E7%9A%84%E6%92%B0%E5%AF%AB%E9%A2%A8%E6%A0%BC">Go 的撰寫風格</a></li>
</ul>
<hr>
<h2 id="Go的資料型別"><a href="#Go的資料型別" class="headerlink" title="Go的資料型別"></a>Go的資料型別</h2><h4 id="數字（Number）"><a href="#數字（Number）" class="headerlink" title="數字（Number）"></a>數字（Number）</h4><ul>
<li>無號整數：<code>uint</code>、<code>uint8</code>、<code>uint16</code>、<code>uint32</code>、<code>uint64</code></li>
<li>有號整數：<code>int</code>、<code>int8</code>、<code>int16</code>、<code>int32</code>、<code>int64</code></li>
<li>浮點數：<code>float32</code>、<code>float64</code></li>
<li>複數：<code>complex64</code>、<code>complex128</code><h4 id="字串（String）"><a href="#字串（String）" class="headerlink" title="字串（String）"></a>字串（String）</h4></li>
<li><code>string</code>：UTF-8 編碼的字串</li>
<li><code>byte</code>：不以編碼處理的字串</li>
<li><code>rune</code>：型別為<code>int32</code> 的值<h4 id="布林（Boolean）"><a href="#布林（Boolean）" class="headerlink" title="布林（Boolean）"></a>布林（Boolean）</h4></li>
<li><code>true</code>：真</li>
<li><code>false</code>：偽<h4 id="陣列（Array）"><a href="#陣列（Array）" class="headerlink" title="陣列（Array）"></a>陣列（Array）</h4></li>
<li>以數字為索引的線性容器，長度固定。<h4 id="結構（Struct）"><a href="#結構（Struct）" class="headerlink" title="結構（Struct）"></a>結構（Struct）</h4></li>
<li>宣告一個資料結構（非實體），具有哪些參數以及型別。<h4 id="指標（Pointer）"><a href="#指標（Pointer）" class="headerlink" title="指標（Pointer）"></a>指標（Pointer）</h4></li>
<li>指向儲存其他值的「位址」，透過指標可間接存取值。<h4 id="切片（Slice）"><a href="#切片（Slice）" class="headerlink" title="切片（Slice）"></a>切片（Slice）</h4></li>
<li>以數字為索引的線性容器，長度可以伸縮。<h4 id="映射（Map）"><a href="#映射（Map）" class="headerlink" title="映射（Map）"></a>映射（Map）</h4></li>
<li>以 key-value pair 的非線性資料結構，以雜湊方式儲存在記憶體中。<h4 id="函式（Function）"><a href="#函式（Function）" class="headerlink" title="函式（Function）"></a>函式（Function）</h4></li>
<li>提供具有行為的函式，作為型別來定義變數。<h4 id="通道（Channel）"><a href="#通道（Channel）" class="headerlink" title="通道（Channel）"></a>通道（Channel）</h4></li>
<li>在 Goroutine 之間傳遞資料。<h4 id="介面（Interface）"><a href="#介面（Interface）" class="headerlink" title="介面（Interface）"></a>介面（Interface）</h4></li>
<li>抽象型別，不顯露內部的值，而只提供可操作的行為。</li>
</ul>
<hr>
<h2 id="Go的套件"><a href="#Go的套件" class="headerlink" title="Go的套件"></a>Go的套件</h2><p>Go 以 package 來組織程式，因此每個原始碼檔案的開頭都會是 <code>package &lt;fileName&gt;</code>，以作為一個 package 來讓其他檔案調用。</p>
<p>下面整理 Go 內建的一些常用套件。</p>
<h3 id="fmt：格式化輸出以及掃描輸入"><a href="#fmt：格式化輸出以及掃描輸入" class="headerlink" title="fmt：格式化輸出以及掃描輸入"></a><code>fmt</code>：格式化輸出以及掃描輸入</h3><h4 id="轉換格式：fmt-Print-、fmt-Printf-、fmt-Println"><a href="#轉換格式：fmt-Print-、fmt-Printf-、fmt-Println" class="headerlink" title="轉換格式：fmt.Print()、fmt.Printf()、fmt.Println()"></a>轉換格式：<code>fmt.Print()</code>、<code>fmt.Printf()</code>、<code>fmt.Println()</code></h4><p>轉換格式後輸出值，如下例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">appleColor := <span class="string">&quot;red&quot;</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;Color of apple: %v\n&quot;</span>, appleColor)</span><br><span class="line"><span class="comment">// 印出 Color of apple: red</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Color of apple: %q\n&quot;</span>, appleColor)</span><br><span class="line"><span class="comment">// 印出 Color of apple: &quot;red&quot;</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Color of apple: %T\n&quot;</span>, appleColor)</span><br><span class="line"><span class="comment">// 印出 Color of apple: string</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th>常用轉換格式</th>
</tr>
</thead>
<tbody><tr>
<td>%v</td>
<td>值自然格式</td>
</tr>
<tr>
<td>%s</td>
<td>字串</td>
</tr>
<tr>
<td>%q</td>
<td>加引號的字串</td>
</tr>
<tr>
<td>%T</td>
<td>值型別</td>
</tr>
</tbody></table>
<h4 id="組合字串：fmt-Sprint-、fmt-Sprintln-、fmt-Sprintf"><a href="#組合字串：fmt-Sprint-、fmt-Sprintln-、fmt-Sprintf" class="headerlink" title="組合字串：fmt.Sprint()、fmt.Sprintln()、fmt.Sprintf()"></a>組合字串：<code>fmt.Sprint()</code>、<code>fmt.Sprintln()</code>、<code>fmt.Sprintf()</code></h4><p>不會印出東西，而是拿來組合字串用的。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">v1 := <span class="string">&quot;I&quot;</span></span><br><span class="line">v2 := <span class="string">&quot;am&quot;</span></span><br><span class="line">v3 := <span class="string">&quot;Iron Man&quot;</span></span><br><span class="line"></span><br><span class="line">combineString := fmt.Sprintln(v1, v2, v3)</span><br><span class="line">fmt.Println(combineString)</span><br><span class="line"><span class="comment">// 印出 I am Iron Man</span></span><br></pre></td></tr></table></figure>

<h3 id="os、io、bufio：存取作業系統"><a href="#os、io、bufio：存取作業系統" class="headerlink" title="os、io、bufio：存取作業系統"></a><code>os</code>、<code>io</code>、<code>bufio</code>：存取作業系統</h3><h4 id="存取作業系統：os-Open-、os-Create-、os-Remove-、os-Mkdir"><a href="#存取作業系統：os-Open-、os-Create-、os-Remove-、os-Mkdir" class="headerlink" title="存取作業系統：os.Open()、os.Create()、os.Remove()、os.Mkdir()"></a>存取作業系統：<code>os.Open()</code>、<code>os.Create()</code>、<code>os.Remove()</code>、<code>os.Mkdir()</code></h4><p>建立、編輯或移除作業系統中的資料夾、檔案。</p>
<h4 id="存取命令列參數：os-Args-1"><a href="#存取命令列參數：os-Args-1" class="headerlink" title="存取命令列參數：os.Args[1:]"></a>存取命令列參數：<code>os.Args[1:]</code></h4><p>取得開啟檔案時命令列的參數，<code>[1:]</code> 為刪除掉第一個參數（程式執行的路徑）。</p>
<h4 id="存取作業系統：io-ioutil-ReadFile-、io-ioutil-ReadDir"><a href="#存取作業系統：io-ioutil-ReadFile-、io-ioutil-ReadDir" class="headerlink" title="存取作業系統：io/ioutil.ReadFile()、io/ioutil.ReadDir()"></a>存取作業系統：<code>io/ioutil.ReadFile()</code>、<code>io/ioutil.ReadDir()</code></h4><p>建立、編輯或移除作業系統中的資料夾、檔案。</p>
<h4 id="存取作業系統：bufio-NewWriter"><a href="#存取作業系統：bufio-NewWriter" class="headerlink" title="存取作業系統：bufio.NewWriter()"></a>存取作業系統：<code>bufio.NewWriter()</code></h4><p>實作了 <code>io</code> 的一些介面，能更方便地建立、編輯或移除作業系統中的資料夾、檔案。<br>。</p>
<blockquote>
<p>如果你跟我一樣，覺得這些 Package 都很像，產生了「這麼多種，到底什麼時候要用哪個？差別在哪裡？」的疑惑，可以看看這篇：<a class="link"   target="_blank" rel="noopener" href="https://juejin.cn/post/6864886461746855949" >掘金 - Go指南10-谈谈对Golang IO读写的困惑<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
<h3 id="flag：從命令列取得參數在程式碼中使用"><a href="#flag：從命令列取得參數在程式碼中使用" class="headerlink" title="flag：從命令列取得參數在程式碼中使用"></a><code>flag</code>：從命令列取得參數在程式碼中使用</h3><h4 id="設置外來變數：flag-String-、flag-Bool-、flag-Int-、flag-Var"><a href="#設置外來變數：flag-String-、flag-Bool-、flag-Int-、flag-Var" class="headerlink" title="設置外來變數：flag.String()、flag.Bool()、flag.Int()、flag.Var()"></a>設置外來變數：<code>flag.String()</code>、<code>flag.Bool()</code>、<code>flag.Int()</code>、<code>flag.Var()</code></h4><p>使用這個套件，可以讓使用者在啟動專案時代入參數，進而達到一份專案中包含多功能的效果。</p>
<hr>
<h2 id="Go的撰寫風格"><a href="#Go的撰寫風格" class="headerlink" title="Go的撰寫風格"></a>Go的撰寫風格</h2><h3 id="使用指標（Pointer）來做變數處理"><a href="#使用指標（Pointer）來做變數處理" class="headerlink" title="使用指標（Pointer）來做變數處理"></a>使用指標（Pointer）來做變數處理</h3><p>在宣告一個變數時，會在記憶體中給予其一個位址來存放它的相關設定（型別、值），而 Go 提供一種方法來取用該變數的位址或者指向它做變更，這樣就不用拷貝該變數，多消耗一個記憶體位址。當需要跨函式對同一變數做存取時，這個方法相當有幫助。</p>
<ul>
<li><code>*</code>：Point to，指向某個記憶體位址的值</li>
<li><code>&amp;</code>：Address of，某個變數的記憶體位址</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="number">7</span>   <span class="comment">// 宣告一個 int 變數</span></span><br><span class="line">p := &amp;a  <span class="comment">// 宣告一個變數 p，指向 a 的位址</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Value of a:%v\n&quot;</span>, a)</span><br><span class="line"><span class="comment">// 印出 Value of a:7</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Address of a:%v\n&quot;</span>, &amp;a)</span><br><span class="line"><span class="comment">// 印出 Address of a:0xc000118000</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Value of p:%v\n&quot;</span>, p)</span><br><span class="line"><span class="comment">// 印出 Value of p:0xc000118000</span></span><br><span class="line"></span><br><span class="line">*p = <span class="number">8</span>   <span class="comment">// 修改 *p 的值，影響到 a</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;Value of a:%v\n&quot;</span>, a)</span><br><span class="line"><span class="comment">// 印出 Value of a:8</span></span><br></pre></td></tr></table></figure>

<p>從上述例子可以看出，<code>p</code> 這個變數儲存的是 <code>a</code> 的記憶體位址，而修改 <code>*p</code> 的值，等於修改到 <code>a</code> 的值。若將 <code>p</code>（a.k.a:<code>a</code> 的記憶體位址）作為變數在函式之間傳遞使用，再用指標指向 <code>*p</code>，就可以在各函式之間對同一個變數做處理，不用一直耗費記憶體來建立新的變數。</p>
<h3 id="利用-defer（延遲觸發）來做例外處理"><a href="#利用-defer（延遲觸發）來做例外處理" class="headerlink" title="利用 defer（延遲觸發）來做例外處理"></a>利用 <code>defer</code>（延遲觸發）來做例外處理</h3><p>對於例外處理的這一塊，因為還沒有實際寫出一個 Go 專案，因此還不是很能領會實作方式。</p>
<h4 id="defer（延遲處理）"><a href="#defer（延遲處理）" class="headerlink" title="defer（延遲處理）"></a><code>defer</code>（延遲處理）</h4><ul>
<li>使用 <code>defer</code> 將工作延遲到想要的時間點執行。</li>
<li>當程式結束時，多個 <code>defer</code> 處理將以反向順序執行，也就是 LIFO（Last In First Out）。<h4 id="panic（中斷）"><a href="#panic（中斷）" class="headerlink" title="panic（中斷）"></a><code>panic</code>（中斷）</h4></li>
<li>當發生錯誤（也就是常見的 <code>err != nil</code>）時，透過 <code>panic</code> 來將函式中斷。<h4 id="recover（恢復）"><a href="#recover（恢復）" class="headerlink" title="recover（恢復）"></a><code>recover</code>（恢復）</h4></li>
<li>在發生了 <code>panic</code> 而導致流程中斷後，如果想要讓程式繼續做別的處理，就可以使用 <code>recover</code>。但 <code>recover</code> 必須在 <code>defer</code> 中執行，否則回傳值會是 <code>nil</code>。</li>
</ul>
<hr>
<h3 id="利用-goroutine-來做併發處理"><a href="#利用-goroutine-來做併發處理" class="headerlink" title="利用 goroutine 來做併發處理"></a>利用 <code>goroutine</code> 來做併發處理</h3><p>Go 特色之一就是對於 concurrency 的處理，而 Go 提供的作法就是使用 goroutine。</p>
<h4 id="Goroutine（執行緒）"><a href="#Goroutine（執行緒）" class="headerlink" title="Goroutine（執行緒）"></a><code>Goroutine</code>（執行緒）</h4><p>只要在函式前加上 <code>go</code>，就會開啟一個新的 goroutine。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f()    <span class="comment">// 呼叫執行 f()</span></span><br><span class="line"><span class="keyword">go</span> f() <span class="comment">// 建立一個新的 goroutine 來呼叫執行 f()</span></span><br></pre></td></tr></table></figure>
<p>Goroutine 能讓各個函式同時進行，而不用相互等待，我以前端的 <code>Ajax</code>，或 Python 的 <code>Thread</code> 來理解，就比較能想像了。</p>
<h4 id="Channel（通道）-Select（選擇）"><a href="#Channel（通道）-Select（選擇）" class="headerlink" title="Channel（通道）+ Select（選擇）"></a><code>Channel</code>（通道）+ <code>Select</code>（選擇）</h4><p>Channel 是運行中的 goroutine 之間的連線管道，可以讓其中一個 goroutine 發送訊息給其他 goroutine。要建構 channel，可以這樣做：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)     <span class="comment">// 建構一個型別為 chan int 的 channel</span></span><br><span class="line">ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>) <span class="comment">// 建構一個型別為 chan string 的 channel</span></span><br><span class="line">ch3 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">bool</span>)   <span class="comment">// 建構一個型別為 chan bool 的 channel</span></span><br></pre></td></tr></table></figure>
<p>Channel 具有 <strong>發送</strong> 與 <strong>接收</strong> 兩種基本操作，通稱為 <strong>通訊</strong>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ch &lt;- x   <span class="comment">// 發送 x 給 channel</span></span><br><span class="line">y  &lt;- ch  <span class="comment">// y 接收來自 ch 的值</span></span><br><span class="line">&lt;- ch     <span class="comment">// 拋棄結果</span></span><br><span class="line"><span class="built_in">close</span>(ch) <span class="comment">// 關閉 channel</span></span><br></pre></td></tr></table></figure>
<p>可以透過 <strong>關閉</strong> 操作來讓 channel 不再接收值，若再發送值到此 channel，會引發 panic。在已經關閉的 channel 上取值，會取出直到沒有值為止，之後的接收操作會得到 nil。</p>
<p>對 channel 的進一步討論，我會另外再整理一篇心得。</p>
<h4 id="Mutex（互斥鎖）"><a href="#Mutex（互斥鎖）" class="headerlink" title="Mutex（互斥鎖）"></a><code>Mutex</code>（互斥鎖）</h4><p>當有多個 gouroutine 在運行中時，有時會出現互相影響的狀況，此時需要設定讓其中一個 goroutine 先執行完畢，才能開放給其他 goroutine 使用，而這樣的方式就是 <code>Mutex.Lock()</code>。《精通 Go 程式設計》中舉了以下例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;sync&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    mu sync.Mutex</span><br><span class="line">    balance <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Deposit</span><span class="params">(amount <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    mu.Lock()                   <span class="comment">// 上鎖</span></span><br><span class="line">    balance = balance + amount  <span class="comment">// 確保一次只有一個 goroutine 能改變餘額</span></span><br><span class="line">    mu.Unlock()                 <span class="comment">// 釋放鎖</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Balance</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    mu.Lock()</span><br><span class="line">    b := balance</span><br><span class="line">    mu.Unlock()</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="WaitGroup（等待群組）"><a href="#WaitGroup（等待群組）" class="headerlink" title="WaitGroup（等待群組）"></a><code>WaitGroup</code>（等待群組）</h4><p>若今天要等到所有 goroutine 都處理完畢再進行下一個動作，除了 channel 之外，<code>sync</code> 套件也提供了 WaitGroup 的方式來達到這樣的效果（以 UML 來說，就是「等待分支節點結合 Join」）。</p>
<p>詳細的 WaitGroup 使用方式就不贅述。</p>
<h4 id="Context（背景）"><a href="#Context（背景）" class="headerlink" title="Context（背景）"></a><code>Context</code>（背景）</h4><p>叫做背景可能不太精確，context 是在剛開始用 <code>gin</code> 寫 http server 的時候就很常見的一個東西，但實際上還是不太了解它的意思。經過粗淺的研究後，才知道 context 的主要用途，是在背景管理所有不定數量的 goroutine。</p>
<p>對於目前的我來說，理解 context 還太早，等之後對 goroutine 的使用更熟悉了，再回頭來重新認識 context，會是比較有效率的學習方式。</p>
<hr>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><p>經過本文的整理，對 Go 有了基本淺層的認識，也大致上知道 Go 的優勢以及風格是什麼，這樣應該會對理解主管的專案程式碼有些許的幫助（吧）。愈學愈覺得，Go 是個很棒的語言，主要是他的規範很嚴格，但又相當好懂，對於整理與維護來說非常友善！雖然目前的自己都在寫義大利麵 code，但心中也是有著寫 clean code 的嚮往啊！</p>
<p>總而言之，大家一起學 Go 吧！</p>
<hr>
<p>參考資料：</p>
<ul>
<li>Alan A.A. Donovan - 精通 Go 程式設計</li>
<li><a class="link"   target="_blank" rel="noopener" href="https://pjchender.dev/golang/structs/" >PJCHENder - [Golang] Struct<i class="fas fa-external-link-alt"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10223934/" >iT邦幫忙 - Golang 入門到進階實戰：Day 18 常用基本庫介紹<i class="fas fa-external-link-alt"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://juejin.cn/post/6864886461746855949" >掘金 - Go指南10-谈谈对Golang IO读写的困惑<i class="fas fa-external-link-alt"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://blog.wu-boy.com/2020/08/three-ways-to-manage-concurrency-in-go/" >小惡魔 - AppleBOY - 在 Go 語言內管理 Concurrency 的三種方式<i class="fas fa-external-link-alt"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10208936" >iT邦幫忙 - Go劍復國-30天導入Golang：Golang Concurrency Pattern<i class="fas fa-external-link-alt"></i></a></li>
</ul>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>文章標題：Golang 學習筆記 - 初步接觸 Go!</li>
        <li>文章作者：Gkfat</li>
        <li>撰寫時間：2021-09-05 08:34:03</li>
        <li>
            永久連結：https://gkfat.github.io/2021/09/05/golang-basic/
        </li>
        <li>
            版權宣告：這個網站所有文章均使用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 授權。
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/%E5%BE%8C%E7%AB%AF%E9%96%8B%E7%99%BC/">#後端開發</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Go/">#Go</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/11/23/oop-basic/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">OOP 學習筆記 - 什麼是物件導向程式設計？跟前端開發有什麼關係？</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/09/05/python-file-upload-service/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">後端學習筆記 - 來寫一個串接 NAS 的檔案管理服務吧！</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2019</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Gkfat</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                
                    <span id="busuanzi_container_site_pv">
                        閱覽&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <a target="_blank" href="https://hexo.io">Hexo</a> 框架&nbsp;|&nbsp;主題&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Go%E7%9A%84%E8%B3%87%E6%96%99%E5%9E%8B%E5%88%A5"><span class="nav-number">1.</span> <span class="nav-text">Go的資料型別</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B8%E5%AD%97%EF%BC%88Number%EF%BC%89"><span class="nav-number">1.0.1.</span> <span class="nav-text">數字（Number）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E4%B8%B2%EF%BC%88String%EF%BC%89"><span class="nav-number">1.0.2.</span> <span class="nav-text">字串（String）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%83%E6%9E%97%EF%BC%88Boolean%EF%BC%89"><span class="nav-number">1.0.3.</span> <span class="nav-text">布林（Boolean）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%A3%E5%88%97%EF%BC%88Array%EF%BC%89"><span class="nav-number">1.0.4.</span> <span class="nav-text">陣列（Array）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B5%90%E6%A7%8B%EF%BC%88Struct%EF%BC%89"><span class="nav-number">1.0.5.</span> <span class="nav-text">結構（Struct）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E6%A8%99%EF%BC%88Pointer%EF%BC%89"><span class="nav-number">1.0.6.</span> <span class="nav-text">指標（Pointer）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E7%89%87%EF%BC%88Slice%EF%BC%89"><span class="nav-number">1.0.7.</span> <span class="nav-text">切片（Slice）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%EF%BC%88Map%EF%BC%89"><span class="nav-number">1.0.8.</span> <span class="nav-text">映射（Map）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BD%E5%BC%8F%EF%BC%88Function%EF%BC%89"><span class="nav-number">1.0.9.</span> <span class="nav-text">函式（Function）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E9%81%93%EF%BC%88Channel%EF%BC%89"><span class="nav-number">1.0.10.</span> <span class="nav-text">通道（Channel）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8B%E9%9D%A2%EF%BC%88Interface%EF%BC%89"><span class="nav-number">1.0.11.</span> <span class="nav-text">介面（Interface）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go%E7%9A%84%E5%A5%97%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">Go的套件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fmt%EF%BC%9A%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BC%B8%E5%87%BA%E4%BB%A5%E5%8F%8A%E6%8E%83%E6%8F%8F%E8%BC%B8%E5%85%A5"><span class="nav-number">2.1.</span> <span class="nav-text">fmt：格式化輸出以及掃描輸入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%89%E6%8F%9B%E6%A0%BC%E5%BC%8F%EF%BC%9Afmt-Print-%E3%80%81fmt-Printf-%E3%80%81fmt-Println"><span class="nav-number">2.1.1.</span> <span class="nav-text">轉換格式：fmt.Print()、fmt.Printf()、fmt.Println()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B5%84%E5%90%88%E5%AD%97%E4%B8%B2%EF%BC%9Afmt-Sprint-%E3%80%81fmt-Sprintln-%E3%80%81fmt-Sprintf"><span class="nav-number">2.1.2.</span> <span class="nav-text">組合字串：fmt.Sprint()、fmt.Sprintln()、fmt.Sprintf()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#os%E3%80%81io%E3%80%81bufio%EF%BC%9A%E5%AD%98%E5%8F%96%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1"><span class="nav-number">2.2.</span> <span class="nav-text">os、io、bufio：存取作業系統</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%8F%96%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%EF%BC%9Aos-Open-%E3%80%81os-Create-%E3%80%81os-Remove-%E3%80%81os-Mkdir"><span class="nav-number">2.2.1.</span> <span class="nav-text">存取作業系統：os.Open()、os.Create()、os.Remove()、os.Mkdir()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%8F%96%E5%91%BD%E4%BB%A4%E5%88%97%E5%8F%83%E6%95%B8%EF%BC%9Aos-Args-1"><span class="nav-number">2.2.2.</span> <span class="nav-text">存取命令列參數：os.Args[1:]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%8F%96%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%EF%BC%9Aio-ioutil-ReadFile-%E3%80%81io-ioutil-ReadDir"><span class="nav-number">2.2.3.</span> <span class="nav-text">存取作業系統：io&#x2F;ioutil.ReadFile()、io&#x2F;ioutil.ReadDir()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%8F%96%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%EF%BC%9Abufio-NewWriter"><span class="nav-number">2.2.4.</span> <span class="nav-text">存取作業系統：bufio.NewWriter()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#flag%EF%BC%9A%E5%BE%9E%E5%91%BD%E4%BB%A4%E5%88%97%E5%8F%96%E5%BE%97%E5%8F%83%E6%95%B8%E5%9C%A8%E7%A8%8B%E5%BC%8F%E7%A2%BC%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">2.3.</span> <span class="nav-text">flag：從命令列取得參數在程式碼中使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A8%AD%E7%BD%AE%E5%A4%96%E4%BE%86%E8%AE%8A%E6%95%B8%EF%BC%9Aflag-String-%E3%80%81flag-Bool-%E3%80%81flag-Int-%E3%80%81flag-Var"><span class="nav-number">2.3.1.</span> <span class="nav-text">設置外來變數：flag.String()、flag.Bool()、flag.Int()、flag.Var()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go%E7%9A%84%E6%92%B0%E5%AF%AB%E9%A2%A8%E6%A0%BC"><span class="nav-number">3.</span> <span class="nav-text">Go的撰寫風格</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%8C%87%E6%A8%99%EF%BC%88Pointer%EF%BC%89%E4%BE%86%E5%81%9A%E8%AE%8A%E6%95%B8%E8%99%95%E7%90%86"><span class="nav-number">3.1.</span> <span class="nav-text">使用指標（Pointer）來做變數處理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-defer%EF%BC%88%E5%BB%B6%E9%81%B2%E8%A7%B8%E7%99%BC%EF%BC%89%E4%BE%86%E5%81%9A%E4%BE%8B%E5%A4%96%E8%99%95%E7%90%86"><span class="nav-number">3.2.</span> <span class="nav-text">利用 defer（延遲觸發）來做例外處理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#defer%EF%BC%88%E5%BB%B6%E9%81%B2%E8%99%95%E7%90%86%EF%BC%89"><span class="nav-number">3.2.1.</span> <span class="nav-text">defer（延遲處理）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#panic%EF%BC%88%E4%B8%AD%E6%96%B7%EF%BC%89"><span class="nav-number">3.2.2.</span> <span class="nav-text">panic（中斷）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#recover%EF%BC%88%E6%81%A2%E5%BE%A9%EF%BC%89"><span class="nav-number">3.2.3.</span> <span class="nav-text">recover（恢復）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-goroutine-%E4%BE%86%E5%81%9A%E4%BD%B5%E7%99%BC%E8%99%95%E7%90%86"><span class="nav-number">3.3.</span> <span class="nav-text">利用 goroutine 來做併發處理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Goroutine%EF%BC%88%E5%9F%B7%E8%A1%8C%E7%B7%92%EF%BC%89"><span class="nav-number">3.3.1.</span> <span class="nav-text">Goroutine（執行緒）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Channel%EF%BC%88%E9%80%9A%E9%81%93%EF%BC%89-Select%EF%BC%88%E9%81%B8%E6%93%87%EF%BC%89"><span class="nav-number">3.3.2.</span> <span class="nav-text">Channel（通道）+ Select（選擇）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mutex%EF%BC%88%E4%BA%92%E6%96%A5%E9%8E%96%EF%BC%89"><span class="nav-number">3.3.3.</span> <span class="nav-text">Mutex（互斥鎖）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WaitGroup%EF%BC%88%E7%AD%89%E5%BE%85%E7%BE%A4%E7%B5%84%EF%BC%89"><span class="nav-number">3.3.4.</span> <span class="nav-text">WaitGroup（等待群組）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Context%EF%BC%88%E8%83%8C%E6%99%AF%EF%BC%89"><span class="nav-number">3.3.5.</span> <span class="nav-text">Context（背景）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%B5%90"><span class="nav-number">4.</span> <span class="nav-text">小結</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜尋..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>



</body>
</html>
